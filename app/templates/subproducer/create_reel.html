{% extends "base.html" %}

{% block title %}Crear Reel - Subproductor{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">
            <i class="fas fa-video me-2 text-primary"></i>
            Crear Nuevo Reel
        </h1>
        <div class="btn-toolbar mb-2 mb-md-0">
            <a href="{{ url_for('subproducer.reels') }}" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left me-1"></i>
                Volver a Mis Reels
            </a>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
            <div class="card shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-plus-circle me-2 text-success"></i>
                        Información del Reel
                    </h5>
                </div>
                <div class="card-body">
                    <form method="post">
                        <!-- Título del Reel -->
                        <div class="mb-4">
                            <label for="title" class="form-label fw-semibold">
                                <i class="fas fa-heading me-2"></i>
                                Título del Reel
                            </label>
                            <input type="text" 
                                   id="title"
                                   name="title" 
                                   class="form-control" 
                                   required 
                                   placeholder="Ejemplo: Tutorial de Marketing Digital"
                                   value="{{ title or '' }}">
                            <div class="form-text">
                                Un título descriptivo y atractivo para tu reel
                            </div>
                        </div>

                        <!-- Descripción -->
                        <div class="mb-4">
                            <label for="description" class="form-label fw-semibold">
                                <i class="fas fa-align-left me-2"></i>
                                Descripción (Opcional)
                            </label>
                            <textarea id="description"
                                      name="description" 
                                      class="form-control" 
                                      rows="3"
                                      placeholder="Describe brevemente el contenido del reel...">{{ description or '' }}</textarea>
                        </div>

                        <!-- Selección de Avatar -->
                        {% if avatars and avatars|length > 0 %}
                            <div class="mb-4">
                                <label for="avatar_id" class="form-label fw-semibold">
                                    <i class="fas fa-user-circle me-2"></i>
                                    Avatar para el Reel
                                </label>
                                <select id="avatar_id" name="avatar_id" class="form-select" required>
                                    <option value="">— Seleccionar avatar —</option>
                                    {% for avatar in avatars %}
                                        <option value="{{ avatar.id }}">
                                            {{ avatar.name }} ({{ avatar.avatar_type|title }} - {{ avatar.language|upper }})
                                        </option>
                                    {% endfor %}
                                </select>
                                <div class="form-text">
                                    Solo aparecen avatares aprobados por tu productor
                                </div>
                            </div>
                        {% else %}
                            <div class="alert alert-warning d-flex align-items-center" role="alert">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                <div>
                                    <strong>No hay avatares disponibles</strong><br>
                                    No tienes avatares aprobados para crear reels. Contacta a tu productor o 
                                    <a href="{{ url_for('subproducer.create_avatar') }}" class="alert-link">crea un nuevo avatar</a>.
                                </div>
                            </div>
                        {% endif %}

                        <!-- Guión/Script -->
                        <div class="mb-4">
                            <label for="script" class="form-label fw-semibold">
                                <i class="fas fa-microphone me-2"></i>
                                Guión / Texto del Video
                            </label>
                            <textarea id="script"
                                      name="script" 
                                      class="form-control" 
                                      rows="8"
                                      required
                                      placeholder="Escribí el texto que el avatar dirá en el video...

Ejemplo:
¡Hola! Bienvenidos a este tutorial sobre marketing digital. Hoy aprenderemos las estrategias más efectivas para hacer crecer tu negocio online.

Recuerda que puedes usar saltos de línea para pausas naturales.">{{ script or '' }}</textarea>
                            <div class="form-text">
                                <i class="fas fa-info-circle me-1"></i>
                                El texto debe ser claro y natural. Los saltos de línea crean pausas en la narración.
                            </div>
                        </div>

                        <!-- Configuración adicional -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="resolution" class="form-label fw-semibold">
                                    <i class="fas fa-desktop me-2"></i>
                                    Resolución
                                </label>
                                <select id="resolution" name="resolution" class="form-select">
                                    <option value="1080p" selected>1080p (Full HD)</option>
                                    <option value="720p">720p (HD)</option>
                                    <option value="4k">4K (Ultra HD)</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="background_type" class="form-label fw-semibold">
                                    <i class="fas fa-image me-2"></i>
                                    Tipo de Fondo
                                </label>
                                <select id="background_type" name="background_type" class="form-select">
                                    <option value="default" selected>Fondo por defecto</option>
                                    <option value="professional">Fondo profesional</option>
                                    <option value="casual">Fondo casual</option>
                                    <option value="custom">Fondo personalizado</option>
                                </select>
                            </div>
                        </div>

                        <!-- Categoría y Tags -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="category" class="form-label fw-semibold">
                                    <i class="fas fa-tags me-2"></i>
                                    Categoría
                                </label>
                                <select id="category" name="category" class="form-select">
                                    <option value="">— Seleccionar categoría —</option>
                                    <option value="educativo">Educativo</option>
                                    <option value="marketing">Marketing</option>
                                    <option value="corporativo">Corporativo</option>
                                    <option value="tutorial">Tutorial</option>
                                    <option value="promocional">Promocional</option>
                                    <option value="informativo">Informativo</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="tags" class="form-label fw-semibold">
                                    <i class="fas fa-hashtag me-2"></i>
                                    Etiquetas
                                </label>
                                <input type="text" 
                                       id="tags"
                                       name="tags" 
                                       class="form-control" 
                                       placeholder="tutorial, marketing, ventas"
                                       value="{{ tags or '' }}">
                                <div class="form-text">
                                    Separar etiquetas con comas
                                </div>
                            </div>
                        </div>

                        <!-- Botones de acción -->
                        <div class="d-flex justify-content-between align-items-center pt-3 border-top">
                            <a href="{{ url_for('subproducer.reels') }}" class="btn btn-outline-secondary">
                                <i class="fas fa-times me-1"></i>
                                Cancelar
                            </a>
                            
                            {% if avatars and avatars|length > 0 %}
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-paper-plane me-1"></i>
                                    Crear Reel
                                </button>
                            {% else %}
                                <button type="button" class="btn btn-secondary" disabled>
                                    <i class="fas fa-ban me-1"></i>
                                    No se puede crear sin avatar
                                </button>
                            {% endif %}
                        </div>
                    </form>
                </div>
            </div>

            <!-- Información adicional -->
            <div class="card mt-4">
                <div class="card-header bg-info text-white">
                    <h6 class="card-title mb-0">
                        <i class="fas fa-lightbulb me-2"></i>
                        Consejos para crear reels efectivos
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="fw-semibold text-primary">
                                <i class="fas fa-check-circle me-2"></i>
                                Mejores prácticas:
                            </h6>
                            <ul class="list-unstyled small">
                                <li><i class="fas fa-chevron-right text-success me-2"></i>Usa un lenguaje claro y natural</li>
                                <li><i class="fas fa-chevron-right text-success me-2"></i>Mantén el mensaje conciso y directo</li>
                                <li><i class="fas fa-chevron-right text-success me-2"></i>Incluye una llamada a la acción clara</li>
                                <li><i class="fas fa-chevron-right text-success me-2"></i>Revisa la ortografía antes de enviar</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6 class="fw-semibold text-primary">
                                <i class="fas fa-clock me-2"></i>
                                Tiempo de procesamiento:
                            </h6>
                            <ul class="list-unstyled small">
                                <li><i class="fas fa-chevron-right text-info me-2"></i>Procesamiento inicial: 2-5 minutos</li>
                                <li><i class="fas fa-chevron-right text-info me-2"></i>Generación de video: 5-15 minutos</li>
                                <li><i class="fas fa-chevron-right text-info me-2"></i>Recibirás notificación cuando esté listo</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}