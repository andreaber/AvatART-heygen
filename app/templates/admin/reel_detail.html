{% extends "base.html" %}
{% block title %}Reel #{{ reel.id }}{% endblock %}

{% block content %}
<div class="container my-4" style="max-width: 900px;">
  <nav aria-label="breadcrumb" class="mb-3">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{{ url_for('admin.dashboard') }}">Admin</a></li>
      <li class="breadcrumb-item"><a href="{{ url_for('admin.reels') }}">Reels</a></li>
      <li class="breadcrumb-item active" aria-current="page">Reel #{{ reel.id }}</li>
    </ol>
  </nav>

  <h3 class="mb-3">{{ reel.title or 'Sin título' }}</h3>

  <div class="row g-3">
    <div class="col-md-6">
      <table class="table table-sm">
        <tr><th>ID</th><td>{{ reel.id }}</td></tr>
        <tr><th>Estado</th><td>{{ reel.status.value }}</td></tr>
        <tr><th>Creado</th><td>{{ reel.created_at.strftime('%d/%m/%Y %H:%M') if reel.created_at else '—' }}</td></tr>
        <tr><th>Creado por</th>
          <td>
            {% if reel.creator %}
              <a href="{{ url_for('admin.user_detail', user_id=reel.creator.id) }}">
                {{ reel.creator.full_name or reel.creator.username }}
              </a>
            {% else %}—{% endif %}
          </td>
        </tr>
        <tr><th>Propietario</th><td>{{ reel.owner.username if reel.owner else '—' }}</td></tr>
        <tr><th>Avatar</th>
          <td>
            {% if reel.avatar %}
              <a href="{{ url_for('admin.avatar_detail', avatar_id=reel.avatar.id) }}">{{ reel.avatar.name }}</a>
            {% else %}—{% endif %}
          </td>
        </tr>
        <tr><th>Visibilidad</th><td>{{ 'Público' if reel.is_public else 'Privado' }}</td></tr>
        <tr><th>Resolución</th><td>{{ reel.resolution or '—' }}</td></tr>
      </table>

      {% if reel.video_url %}
        <a href="{{ reel.video_url }}" target="_blank" class="btn btn-success btn-sm">
          <i class="fas fa-play"></i> Ver en HeyGen
        </a>
      {% endif %}
      <a href="{{ url_for('admin.reels') }}" class="btn btn-outline-secondary btn-sm">Volver</a>
    </div>

    <div class="col-md-6">
      {% if reel.thumbnail_url %}
        <img src="{{ reel.thumbnail_url }}" alt="Thumbnail" class="img-fluid rounded">
      {% else %}
        <div class="bg-light rounded d-flex align-items-center justify-content-center" style="height:240px;">
          <i class="fas fa-video text-muted"></i>
        </div>
      {% endif %}

      {% if reel.description %}
        <h6 class="mt-3">Descripción</h6>
        <p class="text-muted">{{ reel.description }}</p>
      {% endif %}

      {% if reel.script %}
        <h6 class="mt-3">Guion</h6>
        <pre class="bg-light p-2 rounded small">{{ reel.script }}</pre>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}